{
  "openapi": "3.1.0",
  "info": {
    "title": "indexify-server",
    "description": "",
    "contact": {
      "name": "Tensorlake Inc.",
      "email": "support@tensorlake.ai"
    },
    "license": {
      "name": "Apache-2.0",
      "identifier": "Apache-2.0"
    },
    "version": "0.3.12"
  },
  "paths": {
    "/v1/namespaces/{namespace}/applications": {
      "get": {
        "tags": ["operations"],
        "summary": "List compute graphs",
        "operationId": "applications",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": ["integer", "null"],
              "minimum": 0
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "type": ["string", "null"]
            }
          },
          {
            "name": "direction",
            "in": "query",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "$ref": "#/components/schemas/CursorDirection"
                }
              ]
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "lists applications",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApplicationsList"
                }
              }
            }
          },
          "500": {
            "description": "internal server error"
          }
        }
      },
      "post": {
        "tags": ["operations"],
        "summary": "Create or update an application",
        "operationId": "create_or_update_application",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["application", "code"],
                "properties": {
                  "application": {
                    "$ref": "#/components/schemas/Application"
                  },
                  "code": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "create or update an application"
          },
          "500": {
            "description": "unable to create or update application"
          }
        }
      }
    },
    "/v1/namespaces/{namespace}/applications/{application}": {
      "get": {
        "tags": ["operations"],
        "summary": "Get a compute graph definition",
        "operationId": "get_application",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "application definition",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Application"
                }
              }
            }
          },
          "500": {
            "description": "internal server error"
          }
        }
      },
      "post": {
        "tags": ["ingestion"],
        "summary": "Make a request to application",
        "operationId": "invoke_application_with_object_v1",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "request successful"
          },
          "400": {
            "description": "bad request"
          },
          "500": {
            "description": "internal server error"
          }
        }
      },
      "delete": {
        "tags": ["operations"],
        "summary": "Delete compute graph",
        "operationId": "delete_application",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "application deleted successfully"
          },
          "400": {
            "description": "unable to delete application"
          }
        }
      }
    },
    "/v1/namespaces/{namespace}/applications/{application}/requests": {
      "get": {
        "tags": ["ingestion"],
        "summary": "List requests for a workflow",
        "operationId": "list_requests",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": ["integer", "null"],
              "minimum": 0
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "type": ["string", "null"]
            }
          },
          {
            "name": "direction",
            "in": "query",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "$ref": "#/components/schemas/CursorDirection"
                }
              ]
            }
          },
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List Application requests",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApplicationRequests"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/v1/namespaces/{namespace}/applications/{application}/requests/{request_id}": {
      "get": {
        "tags": ["retrieve"],
        "summary": "Get request status by id",
        "operationId": "find_request",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "details about a given request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Request"
                }
              }
            }
          },
          "404": {
            "description": "request not found"
          },
          "500": {
            "description": "internal server error"
          }
        }
      },
      "delete": {
        "tags": ["operations"],
        "summary": "Delete a specific request",
        "operationId": "delete_request",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "request has been deleted"
          },
          "404": {
            "description": "request not found"
          },
          "500": {
            "description": "internal server error"
          }
        }
      }
    },
    "/v1/namespaces/{namespace}/applications/{application}/requests/{request_id}/output": {
      "get": {
        "tags": ["retrieve"],
        "summary": "Get function output",
        "operationId": "v1_download_fn_output_payload_simple",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "function output"
          },
          "404": {
            "description": "resource not found"
          },
          "500": {
            "description": "internal server error"
          }
        }
      },
      "head": {
        "tags": ["retrieve"],
        "operationId": "v1_download_fn_output_payload_head",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "function output exists"
          },
          "204": {
            "description": "function output does not exist"
          },
          "404": {
            "description": "resource not found"
          },
          "500": {
            "description": "internal server error"
          }
        }
      }
    },
    "/v1/namespaces/{namespace}/applications/{application}/requests/{request_id}/output/{fn_call_id}": {
      "get": {
        "tags": ["retrieve"],
        "summary": "Get function output by index",
        "operationId": "v1_download_fn_output_payload",
        "parameters": [
          {
            "name": "namespace",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "application",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fn_call_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "function output"
          },
          "404": {
            "description": "resource not found"
          },
          "500": {
            "description": "internal server error"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Allocation": {
        "type": "object",
        "required": [
          "id",
          "function_name",
          "executor_id",
          "function_executor_id",
          "created_at",
          "outcome",
          "attempt_number"
        ],
        "properties": {
          "attempt_number": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "created_at": {
            "type": "integer",
            "minimum": 0
          },
          "execution_duration_ms": {
            "type": ["integer", "null"],
            "format": "int64",
            "minimum": 0
          },
          "executor_id": {
            "type": "string"
          },
          "function_executor_id": {
            "type": "string"
          },
          "function_name": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "outcome": {
            "$ref": "#/components/schemas/FunctionRunOutcome"
          }
        }
      },
      "Application": {
        "type": "object",
        "required": [
          "name",
          "namespace",
          "description",
          "version",
          "tags",
          "functions",
          "entrypoint"
        ],
        "properties": {
          "created_at": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "description": {
            "type": "string"
          },
          "entrypoint": {
            "$ref": "#/components/schemas/EntryPointManifest"
          },
          "functions": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ApplicationFunction"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "name": {
            "type": "string"
          },
          "namespace": {
            "type": "string"
          },
          "tags": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "tombstoned": {
            "type": "boolean"
          },
          "version": {
            "type": "string"
          }
        }
      },
      "ApplicationFunction": {
        "type": "object",
        "required": [
          "name",
          "description",
          "secret_names",
          "timeout_sec",
          "resources",
          "retry_policy",
          "placement_constraints",
          "max_concurrency"
        ],
        "properties": {
          "cache_key": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/CacheKey"
              }
            ]
          },
          "description": {
            "type": "string"
          },
          "initialization_timeout_sec": {
            "$ref": "#/components/schemas/TimeoutSeconds"
          },
          "max_concurrency": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "name": {
            "type": "string"
          },
          "parameters": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ParameterMetadata"
            }
          },
          "placement_constraints": {
            "$ref": "#/components/schemas/PlacementConstraints"
          },
          "resources": {
            "$ref": "#/components/schemas/FunctionResources"
          },
          "retry_policy": {
            "$ref": "#/components/schemas/NodeRetryPolicy"
          },
          "return_type": {},
          "secret_names": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "timeout_sec": {
            "$ref": "#/components/schemas/TimeoutSeconds"
          }
        }
      },
      "ApplicationRequests": {
        "type": "object",
        "required": ["requests"],
        "properties": {
          "next_cursor": {
            "type": ["string", "null"]
          },
          "prev_cursor": {
            "type": ["string", "null"]
          },
          "requests": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShallowRequest"
            }
          }
        }
      },
      "ApplicationsList": {
        "type": "object",
        "required": ["applications"],
        "properties": {
          "applications": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Application"
            }
          },
          "cursor": {
            "type": ["string", "null"]
          }
        }
      },
      "CacheKey": {
        "type": "string"
      },
      "CreateNamespace": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "blob_storage_bucket": {
            "type": ["string", "null"]
          },
          "blob_storage_region": {
            "type": ["string", "null"]
          },
          "name": {
            "type": "string"
          }
        }
      },
      "CursorDirection": {
        "type": "string",
        "enum": ["forward", "backward"]
      },
      "EntryPointManifest": {
        "type": "object",
        "required": [
          "function_name",
          "input_serializer",
          "output_serializer",
          "output_type_hints_base64"
        ],
        "properties": {
          "function_name": {
            "type": "string"
          },
          "input_serializer": {
            "type": "string"
          },
          "output_serializer": {
            "type": "string"
          },
          "output_type_hints_base64": {
            "type": "string"
          }
        }
      },
      "ExecutorAllocations": {
        "type": "object",
        "required": ["count", "executor_id", "function_executors"],
        "properties": {
          "count": {
            "type": "integer",
            "minimum": 0
          },
          "executor_id": {
            "type": "string"
          },
          "function_executors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FnExecutor"
            }
          }
        }
      },
      "ExecutorMetadata": {
        "type": "object",
        "required": [
          "id",
          "executor_version",
          "addr",
          "labels",
          "function_executors",
          "server_only_function_executors",
          "host_resources",
          "free_resources",
          "state",
          "tombstoned",
          "state_hash",
          "clock"
        ],
        "properties": {
          "addr": {
            "type": "string"
          },
          "clock": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "executor_version": {
            "type": "string"
          },
          "free_resources": {
            "$ref": "#/components/schemas/HostResources"
          },
          "function_allowlist": {
            "type": ["array", "null"],
            "items": {
              "$ref": "#/components/schemas/FunctionAllowlist"
            }
          },
          "function_executors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FunctionExecutorMetadata"
            }
          },
          "host_resources": {
            "$ref": "#/components/schemas/HostResources"
          },
          "id": {
            "type": "string"
          },
          "labels": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "propertyNames": {
              "type": "string"
            }
          },
          "server_only_function_executors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FunctionExecutorMetadata"
            }
          },
          "state": {
            "type": "string"
          },
          "state_hash": {
            "type": "string"
          },
          "tombstoned": {
            "type": "boolean"
          }
        }
      },
      "ExecutorsAllocationsResponse": {
        "type": "object",
        "required": ["executors"],
        "properties": {
          "executors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExecutorAllocations"
            }
          }
        }
      },
      "FnExecutor": {
        "type": "object",
        "required": [
          "count",
          "function_executor_id",
          "fn_uri",
          "state",
          "desired_state",
          "allocations"
        ],
        "properties": {
          "allocations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Allocation"
            }
          },
          "count": {
            "type": "integer",
            "minimum": 0
          },
          "desired_state": {
            "type": "string"
          },
          "fn_uri": {
            "type": "string"
          },
          "function_executor_id": {
            "type": "string"
          },
          "state": {
            "type": "string"
          }
        }
      },
      "Function": {
        "type": "object",
        "required": ["name", "fn_name", "description"],
        "properties": {
          "cache_key": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/CacheKey"
              }
            ]
          },
          "description": {
            "type": "string"
          },
          "fn_name": {
            "type": "string"
          },
          "initialization_timeout_sec": {
            "$ref": "#/components/schemas/TimeoutSeconds"
          },
          "input_encoder": {
            "type": "string"
          },
          "max_concurrency": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "name": {
            "type": "string"
          },
          "output_encoder": {
            "type": "string"
          },
          "parameters": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ParameterMetadata"
            }
          },
          "placement_constraints": {
            "$ref": "#/components/schemas/PlacementConstraints"
          },
          "resources": {
            "$ref": "#/components/schemas/FunctionResources"
          },
          "retry_policy": {
            "$ref": "#/components/schemas/NodeRetryPolicy"
          },
          "return_type": {},
          "secret_names": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "timeout_sec": {
            "$ref": "#/components/schemas/TimeoutSeconds"
          }
        }
      },
      "FunctionAllowlist": {
        "type": "object",
        "properties": {
          "application": {
            "type": ["string", "null"]
          },
          "function": {
            "type": ["string", "null"]
          },
          "namespace": {
            "type": ["string", "null"]
          },
          "version": {
            "type": ["string", "null"]
          }
        }
      },
      "FunctionExecutorMetadata": {
        "type": "object",
        "required": [
          "id",
          "namespace",
          "application_name",
          "function_name",
          "version",
          "max_concurrency",
          "state",
          "desired_state"
        ],
        "properties": {
          "application_name": {
            "type": "string"
          },
          "desired_state": {
            "type": "string"
          },
          "function_name": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "max_concurrency": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "namespace": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        }
      },
      "FunctionResources": {
        "type": "object",
        "required": ["cpus", "memory_mb", "ephemeral_disk_mb"],
        "properties": {
          "cpus": {
            "type": "number",
            "format": "double"
          },
          "ephemeral_disk_mb": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "gpus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GPUResources"
            }
          },
          "memory_mb": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          }
        }
      },
      "FunctionRun": {
        "type": "object",
        "required": [
          "id",
          "name",
          "application",
          "namespace",
          "status",
          "application_version",
          "allocations",
          "created_at"
        ],
        "properties": {
          "allocations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Allocation"
            }
          },
          "application": {
            "type": "string"
          },
          "application_version": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "minimum": 0
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "namespace": {
            "type": "string"
          },
          "outcome": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/FunctionRunOutcome"
              }
            ]
          },
          "status": {
            "$ref": "#/components/schemas/FunctionRunStatus"
          }
        }
      },
      "FunctionRunOutcome": {
        "type": "string",
        "enum": ["Undefined", "Success", "Failure"]
      },
      "FunctionRunStatus": {
        "type": "string",
        "enum": ["Pending", "Running", "Completed"]
      },
      "GPUResources": {
        "type": "object",
        "required": ["count", "model"],
        "properties": {
          "count": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "model": {
            "type": "string"
          }
        }
      },
      "HostResources": {
        "type": "object",
        "required": ["cpu_count", "memory_bytes", "disk_bytes"],
        "properties": {
          "cpu_count": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          },
          "disk_bytes": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "gpu": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/GPUResources"
              }
            ]
          },
          "memory_bytes": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          }
        }
      },
      "IndexifyAPIError": {
        "type": "object",
        "required": ["message"],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "ListParams": {
        "type": "object",
        "properties": {
          "cursor": {
            "type": ["string", "null"]
          },
          "direction": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/CursorDirection"
              }
            ]
          },
          "limit": {
            "type": ["integer", "null"],
            "minimum": 0
          }
        }
      },
      "Namespace": {
        "type": "object",
        "required": ["name", "created_at"],
        "properties": {
          "blob_storage_bucket": {
            "type": ["string", "null"]
          },
          "created_at": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "name": {
            "type": "string"
          }
        }
      },
      "NamespaceList": {
        "type": "object",
        "required": ["namespaces"],
        "properties": {
          "namespaces": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Namespace"
            }
          }
        }
      },
      "NodeRetryPolicy": {
        "type": "object",
        "required": [
          "max_retries",
          "initial_delay_sec",
          "max_delay_sec",
          "delay_multiplier"
        ],
        "properties": {
          "delay_multiplier": {
            "type": "number",
            "format": "double"
          },
          "initial_delay_sec": {
            "type": "number",
            "format": "double"
          },
          "max_delay_sec": {
            "type": "number",
            "format": "double"
          },
          "max_retries": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          }
        }
      },
      "ParameterMetadata": {
        "type": "object",
        "required": ["name", "required", "data_type"],
        "properties": {
          "data_type": {},
          "description": {
            "type": ["string", "null"]
          },
          "name": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          }
        }
      },
      "PlacementConstraints": {
        "type": "object",
        "properties": {
          "filter_expressions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of label filter expressions in the format \"key=value\",\n\"key!=value\", etc."
          }
        }
      },
      "Request": {
        "type": "object",
        "required": [
          "id",
          "application_version",
          "created_at",
          "function_runs"
        ],
        "properties": {
          "application_version": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "minimum": 0
          },
          "function_runs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FunctionRun"
            }
          },
          "id": {
            "type": "string"
          },
          "outcome": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/RequestOutcome"
              }
            ]
          },
          "request_error": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/RequestError"
              }
            ]
          }
        }
      },
      "RequestError": {
        "type": "object",
        "required": ["function_name", "message"],
        "properties": {
          "function_name": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "RequestFailureReason": {
        "type": "string",
        "enum": [
          "unknown",
          "internalerror",
          "functionerror",
          "requesterror",
          "constraintunsatisfiable"
        ]
      },
      "RequestOutcome": {
        "oneOf": [
          {
            "type": "string",
            "enum": ["undefined"]
          },
          {
            "type": "string",
            "enum": ["success"]
          },
          {
            "type": "object",
            "required": ["failure"],
            "properties": {
              "failure": {
                "$ref": "#/components/schemas/RequestFailureReason"
              }
            }
          }
        ]
      },
      "ShallowRequest": {
        "type": "object",
        "required": [
          "id",
          "created_at",
          "function_runs_count",
          "application_version"
        ],
        "properties": {
          "application_version": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "minimum": 0
          },
          "function_runs_count": {
            "type": "integer",
            "minimum": 0
          },
          "id": {
            "type": "string"
          },
          "outcome": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/RequestOutcome"
              }
            ]
          }
        }
      },
      "StateChange": {
        "type": "object",
        "required": ["id", "object_id", "change_type", "created_at"],
        "properties": {
          "application": {
            "type": ["string", "null"]
          },
          "change_type": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "format": "int64",
            "minimum": 0
          },
          "id": {
            "type": "string"
          },
          "namespace": {
            "type": ["string", "null"]
          },
          "object_id": {
            "type": "string"
          },
          "request": {
            "type": ["string", "null"]
          }
        }
      },
      "StateChangesResponse": {
        "type": "object",
        "required": ["count", "state_changes"],
        "properties": {
          "count": {
            "type": "integer",
            "minimum": 0
          },
          "state_changes": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StateChange"
            }
          }
        }
      },
      "TimeoutSeconds": {
        "type": "integer",
        "format": "int32",
        "minimum": 0
      },
      "UnallocatedFunctionRuns": {
        "type": "object",
        "required": ["count", "function_runs"],
        "properties": {
          "count": {
            "type": "integer",
            "minimum": 0
          },
          "function_runs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FunctionRun"
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "indexify",
      "description": "Indexify API"
    }
  ]
}
